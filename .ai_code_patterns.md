# Palmer AI Code Patterns

## Add New Endpoint
In src/palmer_ai/api/endpoints/[feature].py:

    @router.post("/new-feature")
    async def new_feature(
        request: FeatureRequest,
        current_user: User = Depends(get_current_user),
        db: Session = Depends(get_db)
    ):
        try:
            # Business logic
            result = await service.process(request)
            logger.info(f"Feature processed: {result.id}")
            return result
        except Exception as e:
            logger.exception("Feature failed")
            raise HTTPException(500, "Internal error")

## Add New Agent
In src/palmer_ai/agents/specialized/[name]_agent.py:

    class NewAgent(BaseAgent):
        async def analyze(self, input_data: Dict[str, Any]) -> AnalysisResult:
            # Agent logic with UWAS reasoning
            pass

## Frontend Component
In frontend/src/components/NewFeature.tsx:

    export function NewFeature() {
      const [data, setData] = useState(null)
      // Component logic
      return <div className="palmer-dark">...</div>
    }

## Current Patterns in Use
- FastAPI routers for API endpoints
- Pydantic models for request/response validation
- Async/await for all I/O operations
- Comprehensive error handling with logging
- Type hints throughout Python code
- TypeScript for frontend type safety
